@using System
@using System.Linq
@using Microsoft.AspNetCore.Mvc.Rendering
@model HomeViewModel
@{
    ViewData["Title"] = "Home Page";
    var dishNumber = 1;
}

<div class="menu-container">
    <h1>Meny</h1>
    @if (Model.ShowAdminActions)
    {
        <div>
            <a class="text-primary" asp-area="" asp-controller="Dish" asp-action="Create"><i class="text-success glyphicon glyphicon-plus"></i> Lägg till Maträtt</a>
        </div>
    }
    @foreach (var category in Model.Menu.GroupBy(d => d.Category).ToList())
    {
        <h2 class="dish-category">@category.Key.Name</h2>
        <ul class="menu">
            @foreach (var dish in category)
            {
                if (Model.ShowAdminActions)
                {
                    <li>

                    </li>
                }
                <li>
                    @{
                        dish.DishNumber = dishNumber;
                        @Html.Partial("MenuItemSummary", dish)
                        dishNumber++;
                    }
                </li>
            }
        </ul>
    }
</div>


@section Scripts {
    <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
    
    <script>
        var acc = document.getElementsByClassName("accordion");
        var i;

        for (i = 0; i < acc.length; i++) {
            acc[i].onclick = function() {
                this.classList.toggle("active");
                var panel = this.nextElementSibling;
                if (panel.style.maxHeight) {
                    panel.style.maxHeight = null;
                } else {
                    panel.style.maxHeight = panel.scrollHeight + "px";
                }
            }
        }
    </script>
}
